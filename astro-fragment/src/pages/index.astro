---
import Item from '../components/item.astro';

export const partial = true;

const id = Astro.url.searchParams.get("id") || "";

interface Item {
	userId: number;
	id: number;
	title: string;
	completed: boolean;
}

let item: Item | null = null;

if (id.length <= 0) {
    return new Response(null, {
        status: 404,
        statusText: 'Not found'
    })
}

const response = await fetch(
	"https://jsonplaceholder.typicode.com/todos/" + id,
);

if (response.ok) {
	item = await response.json();
}
---

{item ? <Item item={item} /> : <p>No item found</p>}
